---
title: "Microsoft Playwright Testing ä½¿ã£ã¦ã¿ãŸ"
emoji: "ğŸ­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["azure", "ci", "playwright", "test"]
published: true
---

## ã¯ã˜ã‚ã«

æœ¬æ–‡æ›¸ã¯ Microsoft Playwright Testing ã‚’èª¿æŸ»ã—ãŸå†…å®¹ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã§ã‚ã‚‹ã€‚ãƒ¡ãƒ¢ã«è¿‘ã„è¨˜è¿°ã«ãªã£ã¦ã„ã‚‹éƒ¨åˆ†ãŒã‚ã‚‹ã€‚
ã¾ãŸã€æœ¬æ–‡æ›¸ã¯ã€ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã€è¨˜è¿°ã™ã‚‹ã€‚

- <https://azure.microsoft.com/en-us/products/playwright-testing/>
- [Microsoft Playwright Testing Preview documentation](https://learn.microsoft.com/ja-jp/azure/playwright-testing/)
  - [What is Microsoft Playwright Testing?](https://learn.microsoft.com/ja-jp/azure/playwright-testing/overview-what-is-microsoft-playwright-testing)
  - [Quick start: Run end-to-end tests at scale with Microsoft Playwright Testing Preview](https://learn.microsoft.com/ja-jp/azure/playwright-testing/quickstart-run-end-to-end-tests)
- [microsoft/playwright-testing-service#README](https://github.com/microsoft/playwright-testing-service/blob/main/README.md)

## What is Microsoft Playwright Testing ?

Microsoft Playwright Testing ã¯ Playwright ã‚’ç”¨ã„ãŸ end-to-end ã§ã® Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œç’°å¢ƒã‚’ Microsoft Azure ä¸Šã®ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦æä¾›ã™ã‚‹ã‚‚ã®ã€‚
2023/10ç¾åœ¨ public preview ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã€‚ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã¯ã€ä»¥ä¸‹ã®åˆ©ç‚¹ãŒã‚ã‚‹ã€‚

- ã™ã§ã«ã‚ã‚‹ Playwright ã‚’ç”¨ã„ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§å®Ÿè¡Œã§ãã‚‹ã€‚
- ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã¯å®Ÿç¾ã—é›£ã„ã€ä¸¦åˆ—å®Ÿè¡Œæ•°ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã§ãã‚‹ã€‚
- ä»¥ä¸‹ã®è¤‡æ•°ã®ãƒ–ãƒ©ã‚¦ã‚¶ã€è¤‡æ•°ã®OSã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã€‚
  - OS: Windows, Linux
  - Browsers: Chromium, Firefox, WebKit, Microsoft Edge
- Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã€ã„ãªã„ã«é–¢ã‚ã‚‰ãšãƒ†ã‚¹ãƒˆå®Ÿè¡Œã§ãã‚‹ã€‚ã¾ãŸã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾ã—ã¦ã‚‚ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã§ãã‚‹ã€‚

## How it works

ä»¥ä¸‹ã®å›³ã¯ã€Microsoft Playwright Testing ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚

![Architecture overview](https://learn.microsoft.com/ja-jp/azure/playwright-testing/media/overview-what-is-microsoft-playwright-testing/playwright-testing-architecture-overview.png)

- Playwright ã®å®Ÿè¡Œè‡ªä½“ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒã‚·ãƒ³ã§è¡Œã„ã€ Microsoft Playwright Testing ãŒãƒ›ã‚¹ãƒˆã™ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®ã™ã‚‹ãŸã‚ã«ã‚„ã‚Šã¨ã‚Šã™ã‚‹ã€‚
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒã‚·ãƒ³ã«ã¯ã€è‡ªå‰ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€ãŠã‚ˆã³ CI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒã‚·ãƒ³ã‚’åˆ©ç”¨ã§ãã‚‹ã€‚CI ã«çµ„ã¿è¾¼ã‚€å ´åˆã¯ã€ Microsoft Playwright Testing ã‚’åˆ©ç”¨ã—ãŸãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚’ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¸€éƒ¨ã«ã§ãã‚‹ã€‚
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã¯ã€å®Ÿè¡Œçµæœã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ Microsoft Playwright Testing ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœã€ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã€ãƒ“ãƒ‡ã‚ªãªã©ã®å‡ºåŠ›ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒã‚·ãƒ³ã‹ã‚‰å–å¾—ã§ãã‚‹ã€‚

## Pricing

æ–™é‡‘ã¯ã€å¾“é‡èª²é‡‘åˆ¶ã§ã€å®Ÿè¡Œæ™‚é–“1åˆ†ã‚ãŸã‚Šã§è¨ˆç®—ã•ã‚Œã‚‹ã€‚ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°ã§ã®èª²é‡‘ã¯ãªã„ãŸã‚ã€ä¸¦åˆ—å®Ÿè¡Œæ•°ã¯è‡ªç”±ã«è¨­å®šã§ãã‚‹æ¨¡æ§˜ã€‚ç‹¬ç«‹ã—ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã€1ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚‚ä¸¦åˆ—å®Ÿè¡Œã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ãŸæ–¹ãŒæœ‰åŠ¹ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã§ãã‚‹ã“ã¨ã«ãªã‚‹ã€‚ãŸã ã—ã€å®Ÿè¡Œæ™‚é–“ã¯ã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã”ã¨ã®å®Ÿè¡Œæ™‚é–“ã®åˆè¨ˆã¨ãªã‚‹ã€‚å…·ä½“çš„ãªæ–™é‡‘ã¯ [Microsoft Playwright Testing pricing](https://azure.microsoft.com/ja-jp/pricing/details/playwright-testing/) ã®ãƒšãƒ¼ã‚¸ã«è¨˜è¼‰ãŒã‚ã‚‹ã€‚

## å®Ÿéš›ã«ä½¿ã£ã¦ã¿ãŸ

### å®Ÿè¡Œç·¨

[Free trial](https://learn.microsoft.com/ja-jp/azure/playwright-testing/how-to-try-playwright-testing-free) ã¨ã—ã¦è©¦ã™ã“ã¨ãŒã§ãã‚‹ã€‚åˆ©ç”¨æœŸé–“ã¯30æ—¥é–“ã§ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ã¯åˆè¨ˆ100åˆ†ã¾ã§ã¨ãªã£ã¦ã„ã‚‹ã€‚
[Quick start: Run end-to-end tests at scale with Microsoft Playwright Testing Preview](https://learn.microsoft.com/ja-jp/azure/playwright-testing/quickstart-run-end-to-end-tests)ã«å¾“ã£ã¦ã€ Microsoft Playwright Testing ã‚’åˆ©ç”¨ã—ãŸãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚’è¡Œã†ã€‚æ‰‹é †ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã€ Playwright ã‚’ç”¨ã„ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Œã°ã€ç°¡å˜ã«è©¦ã™ã“ã¨ãŒã§ããŸã€‚ãªãŠã€`@playwright/test` ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ v1.37 ä»¥ä¸Šã‚’åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

1. [ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ä½œæˆ](https://learn.microsoft.com/ja-jp/azure/playwright-testing/quickstart-run-end-to-end-tests?tabs=playwrightcli#create-a-workspace)
2. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã« [`playwright.service.config.ts`](https://github.com/microsoft/playwright-testing-service/blob/main/samples/get-started/playwright.service.config.ts) ã‚’è¿½åŠ ã™ã‚‹ã€‚
3. [ã‚µãƒ¼ãƒ“ã‚¹ã®èªè¨¼ã®ãŸã‚ã« Access Token ã‚’ç™ºè¡Œã™ã‚‹ã€‚](https://learn.microsoft.com/ja-jp/azure/playwright-testing/quickstart-run-end-to-end-tests?tabs=playwrightcli#create-an-access-token-for-service-authentication)
4. [ã‚µãƒ¼ãƒ“ã‚¹ã¸æ¥ç¶šã™ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURLã‚’å–å¾—ã™ã‚‹](https://learn.microsoft.com/ja-jp/azure/playwright-testing/quickstart-run-end-to-end-tests?tabs=playwrightcli#create-a-workspace)
5. `PLAYWRIGHT_SERVICE_ACCESS_TOKEN` ã¨ `PLAYWRIGHT_SERVICE_URL` ã®ç’°å¢ƒå¤‰æ•°ã‚’ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šã™ã‚‹ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ git ç­‰ã®ãƒªãƒã‚¸ãƒˆãƒªç®¡ç†ä¸‹ã«ç½®ã‹ãªã„ã“ã¨ã€‚
6. `npx playwright test --config=playwright.service.config.ts --workers=20` ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã™ã‚‹ã€‚

### ç¶™ç¶šçš„å®Ÿè¡Œç’°å¢ƒç·¨

[Quick start: Set up continuous end-to-end testing with Microsoft Playwright Testing Preview](https://learn.microsoft.com/ja-jp/azure/playwright-testing/quickstart-automate-end-to-end-testing)ã«å¾“ã£ã¦ã€ Microsoft Playwright Testing ã‚’åˆ©ç”¨ã—ãŸãƒ†ã‚¹ãƒˆã®ç¶™ç¶šçš„å®Ÿè¡Œç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ã€‚ã“ã“ã§ã¯ GitHub Actions ã‚’ç”¨ã„ãŸãŒã€ã»ã¼å‰è¿°ã®ã€Œ[å®Ÿè¡Œç·¨](#å®Ÿè¡Œç·¨)ã€ã®æ‰‹é †ã¨åŒæ§˜ãªã®ã§ã€å·®ç•°ãŒã‚ã‚‹éƒ¨åˆ†ã®ã¿è¨˜è¿°ã™ã‚‹ã€‚

- `PLAYWRIGHT_SERVICE_ACCESS_TOKEN` ã¨ `PLAYWRIGHT_SERVICE_URL` ã®ç’°å¢ƒå¤‰æ•°ã¯ GitHub Actions ã® Secrets ã«è¨­å®šã™ã‚‹ã€‚
- ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã€‚

  ```yaml
  - name: Install dependencies
    working-directory: path/to/playwright/folder # update accordingly
    run: npm ci
  - name: Run Playwright tests
    working-directory: path/to/playwright/folder # update accordingly
    env:
      # Access token and regional endpoint for Microsoft Playwright Testing
      PLAYWRIGHT_SERVICE_ACCESS_TOKEN: ${{ secrets.PLAYWRIGHT_SERVICE_ACCESS_TOKEN }}
      PLAYWRIGHT_SERVICE_URL: ${{ secrets.PLAYWRIGHT_SERVICE_URL }}
      PLAYWRIGHT_SERVICE_RUN_ID: ${{ github.run_id }}-${{ github.run_attempt }}-${{ github.sha }}
    run: npx playwright test -c playwright.service.config.ts --workers=20
  ```

## ã¾ã¨ã‚

Microsoft Playwright Testing ã¯ãƒ†ã‚¹ãƒˆã®ä¸¦åˆ—å®Ÿè¡Œç’°å¢ƒã‚’æä¾›ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œè‡ªä½“ã®ãƒˆãƒªã‚¬ãƒ¼ã‚„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãªã©ã€ã„ã‚ã‚†ã‚‹ CI ã®ãƒ›ã‚¹ãƒˆã®æ©Ÿèƒ½ã¯ã€æä¾›ã—ã¦ã„ãªã„ã€‚GitHub Actions ã‚„ Azure Pipelines ãªã©ã¨ä½µã›ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ç¶™ç¶šçš„ãªãƒ†ã‚¹ãƒˆå®Ÿè¡Œç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚å°å…¥è‡ªä½“ã¯ã€ã™ã§ã« Playwright ã‚’ç”¨ã„ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Œã°ã€ç°¡å˜ã«ã§ãã‚‹ã€‚

<!-- qiita article id: 37525e86f8d05afb299f -->
