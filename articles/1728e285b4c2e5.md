---
title: "Playwrightã®ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆ"
emoji: "ğŸ­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["playwright", "typescript", "javascript", "test", "testing", "web"]
published: true
---

## ã¯ã˜ã‚ã«

Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚ˆãã‚ã‚‹æ“ä½œã«ã¤ã„ã¦ã€Playwrightã®ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ã¾ã¨ã‚ã¾ã™ã€‚
éšæ™‚æ›´æ–°äºˆå®šã§ã™ã€‚

## ã‚¤ãƒ™ãƒ³ãƒˆ

### æ–°ã—ã„ã‚¿ãƒ–ã‚’é–‹ã

```typescript
import { test, Page } from "@playwright/test";

test("æ–°ã—ã„ã‚¿ãƒ–ã‚’é–‹ã", async ({ context, page }) => {
  const newTabPromise: Promise<Page> = context.waitForEvent("page");
  // æ–°ã—ã„ã‚¿ãƒ–ã‚’é–‹ãæ“ä½œ
  await page.getByRole('button', {name: "æ–°ã—ã„ãƒšãƒ¼ã‚¸"}).click();
  const newTab: Page = await newTabPromise;
  await newTab.waitForLoadState("domcontentloaded");
  // æ–°ã—ã„ã‚¿ãƒ–ã§ã®æ“ä½œ

});
```

### ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```typescript
import fs from "fs";
import { Download } from "playwright";
import { test, expect } from "@playwright/test";

test("ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰", async ({ page }) => {
  const downloadPromise: Promise<Download> = page.waitForEvent("download");
  // ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ“ä½œ
  await page.getByRole("button", { name: "ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰" }).click();
  const download: Download = await downloadPromise;
  const filePath: string = "downloaded.txt";
  await download.saveAs(filePath);
  // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
  expect(fs.existsSync(filePath)).toBeTruthy();
});
```

### ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

```typescript
import fs from "fs";
import { FileChooser } from "playwright";
import { test, expect } from "@playwright/test";

test("ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰", async ({ page }) => {
  const fileChooserPromise: Promise<FileChooser> = page.waitForEvent("filechooser");
  await page.getByRole("button", { name: "ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ" }).click();
  const fileChooser: FileChooser = await fileChooserPromise;
  const filePath: string = "toUpload.txt";
  await fileChooser.setFiles(filePath);
  await page.getByRole("button", { name: "ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰" }).click();
});
```
