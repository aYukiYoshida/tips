---
title: "Playwright ã®å‰å‡¦ç†ã¨å¾Œå‡¦ç†"
emoji: "ðŸŽ­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["playwright", "typescript", "test", "web"]
published: true
---

:::message
ãƒ¡ãƒ¢ãƒ¬ãƒ™ãƒ«ã®è¨˜äº‹ã§ã™ãŒã€ã”å®¹èµ¦ãã ã•ã„ã€‚
:::

## Playwright ã®å‰å‡¦ç†ã¨å¾Œå‡¦ç†

Playwright ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã™ã‚‹éš›ã®å‰å‡¦ç† (setup) ã¨å¾Œå‡¦ç† (teardown) ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã«ã¯ã€èª¿ã¹ãŸé™ã‚Šä»¥ä¸‹ã®4ã¤ãŒã‚ã‚‹ã€‚

- Hooks
- Project Dependencies
- Configure globalSetup and globalTeardown
- Fixture

ä»¥ä¸‹ã§ã¯ãã‚Œãžã‚Œã®ç‰¹å¾´ã‚’ç°¡å˜ã«ã¾ã¨ã‚ã‚‹ã€‚

### hooks

- API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - [`test.beforeEach()`](https://playwright.dev/docs/api/class-test#test-before-each-2)
  - [`test.beforeAll()`](https://playwright.dev/docs/api/class-test#test-before-all-2)
  - [`test.afterEach()`](https://playwright.dev/docs/api/class-test#test-after-each-2)
  - [`test.afterAll()`](https://playwright.dev/docs/api/class-test#test-after-all-2)
- ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
  - å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®[Best Practices](https://playwright.dev/docs/best-practices#make-tests-as-isolated-as-possible)ã®ã‚ˆã†ã«ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã”ã¨ã«æ¯Žå›žãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ãªã©ã®æ“ä½œã‚’è¡Œã†å ´åˆã«ä½¿ç”¨ã™ã‚‹ã€‚
- ãƒ¡ãƒ¢
  - `test.beforeEach` ã¨ `test.afterEach` ã¯ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã”ã¨ã«å®Ÿè¡Œã•ã‚Œã‚‹ã€‚
  - `test.beforeAll` ã¨ `test.afterAll` ã¯ä¸¦åˆ—å®Ÿè¡Œæ™‚ã«æ³¨æ„ãŒå¿…è¦ã€‚[playwrightã®`beforeAll()`, `beforeEach()`ã«ã¤ã„ã¦è§£èª¬](https://qiita.com/YusukeTagawa/items/f89fb61e1b304700b40a)ãŒå‚è€ƒã«ãªã‚‹ã€‚

### Project Dependencies

- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - Global setup and teardown ã® [Project Dependencies](https://playwright.dev/docs/test-global-setup-teardown#project-dependencies) ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- ãƒ¡ãƒ¢
  - å…¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å®Ÿè¡Œå‰/å®Ÿè¡Œå¾Œã«ä¸€åº¦ã ã‘å®Ÿè¡Œã§ãã‚‹ (Global Setup/Teardown)
- ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
  - å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®[Authentication](https://playwright.dev/docs/auth) ã®ã‚ˆã†ã«èªè¨¼æƒ…å ±ã‚’æŒã£ãŸ Cookie ã®ä¿å­˜ã™ã‚‹ã€‚

### Configure globalSetup and globalTeardown

- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - Global setup and teardown ã® [Configure globalSetup and globalTeardown](https://playwright.dev/docs/test-global-setup-teardown#project-dependencies) ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- ãƒ¡ãƒ¢
  - `playwright.config.ts` ã§ `globalSetup` ã¨ `globalTeardown` ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€å…¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®å®Ÿè¡Œå‰/å®Ÿè¡Œå¾Œã«ä¸€åº¦ã ã‘å®Ÿè¡Œã§ãã‚‹ (Global Setup/Teardown)

### Fixture

- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - Fixtures ã® [Execution order](https://playwright.dev/docs/next/test-fixtures#execution-order) ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œé †åºã®å‚è€ƒã«ãªã‚‹ã€‚
- ãƒ¡ãƒ¢
  - `await use()` ã®å‰å¾ŒãŒãã‚Œãžã‚Œå‰å‡¦ç†ã¨å¾Œå‡¦ç†ã«ãªã‚‹ã€‚
  - `Fixture` ãŒ test ã¨ hooks ã«å‘¼ã³å‡ºã•ã‚ŒãŸå ´åˆã«ã®ã¿ã«å®Ÿè¡Œã•ã‚Œã‚‹ã€‚
  - `Fixture` ã‚’ `string[]` ãªã©ã¨ã™ã‚‹ã¨ `test()` å†…ã§å¤‰æ•°ã‚’è¿½åŠ ã—ã¦ã€å¾Œå‡¦ç†ã§ãã®å€¤ã‚’å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ä»¥ä¸‹å®Ÿè£…ä¾‹ã€‚

    ```typescript
    import { test, expect } from "@playwright/test";

    type MyTestFixture = {
      sample: string[];
    };

    test.describe("Teardown with the Fixture", () => {
      test.use({
        sample: async(use) => {
          const sample: string[] = [];
          await use(sample);
          console.log(sample);
          // ["foo", "bar"]
        }
      })

      test("push value to the fixture", async ({ sample }) => {
        sample.push("foo");
        sample.push("bar");
      });
    });
    ```
